<div class="content" *ngIf="product else noproduct">
  <div *ngIf="errorServi?.message && errorServi.message().length > 2">
    <app-error></app-error>
  </div>
  <div class="selector">
    <div class="select" *ngIf="variationsSig().length > 0 else select">
      <mat-form-field>
        <mat-label>Variations :</mat-label>
        <mat-select [(ngModel)]="selectedVariation" placeholder="Wähle Produktvariante">
            <mat-option *ngFor="let item of variationsSig()" [value]="item">{{item.variations_name }}</mat-option>
        </mat-select>
      </mat-form-field>
      <button mat-stroked-button (click)="addVariation()" color="accent">Variation Hinzufügen</button>
    </div>
    <div class="right-button">
      <button mat-stroked-button (click)="addNeueVariation()" color="primary">Neue Variation hinzufügen</button>
    </div>
  </div>
  <div>
    <table mat-table [dataSource]="productVarationsSig()">

      <!-- SKU Column -->
      <ng-container matColumnDef="sk">
        <th mat-header-cell *matHeaderCellDef> SKU </th>
        <td mat-cell *matCellDef="let element"> {{element.sku}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.variations_name}} </td>
      </ng-container>

      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Preis </th>
        <td mat-cell *matCellDef="let element"> {{element.price}} </td>
      </ng-container>
     <!-- Quanity Column -->
        <ng-container matColumnDef="quanity">
           <th mat-header-cell *matHeaderCellDef> Menge </th>
           <td mat-cell *matCellDef="let element"> {{element.quanity}} </td>
        </ng-container>
      <!-- Qanity Sold Column -->
      <ng-container matColumnDef="quanity_sold">
        <th mat-header-cell *matHeaderCellDef> Menge(Verkauft) </th>
        <td mat-cell *matCellDef="let element"> {{element.quanity_sold}} </td>
      </ng-container>
      <!-- Value Column -->
      <ng-container matColumnDef="val">
        <th mat-header-cell *matHeaderCellDef> Value </th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field>
            <input type="text" matInput [(ngModel)]="element.value">
          </mat-form-field>
        </td>
      </ng-container>
      <!-- Value2 Column -->
      <ng-container matColumnDef="val2">
        <th mat-header-cell *matHeaderCellDef> Value 2 </th>
        <td mat-cell *matCellDef="let element"> <span>{{element.unit}} </span></td>
      </ng-container>
      <!-- Image Column -->
      <ng-container matColumnDef="image">
        <th mat-header *matHeaderCellDef> Image </th>
        <td mat-cell *matCellDef="let element">

          <div class="imginput">
            <div class="upload">
              <input type="file" id="img" (change)="onFileChange($event)" accept="image/*" *ngIf="helperService.uploadProgersSig() === 0"  />
              <button mat-mini-fab color="primary" class="upload-btn" *ngIf="helperService.uploadProgersSig() === 0"
              (click)="uploadPhoto()">
                <mat-icon>attach_file</mat-icon>
              </button>
              <button mat-mini-fab color="warn" class="upload-btn" *ngIf="helperService.uploadProgersSig() > 0"
              (click)="cancelUpload()">
                <mat-icon>delete_forever</mat-icon>
              </button>
            </div>
              <mat-progress-bar class="progress-bar" mode="determinate"
              [value]="helperService.uploadProgersSig()" *ngIf="helperService.uploadProgersSig() > 0 && helperService.uploadProgersSig() < 100">
              </mat-progress-bar>
              <span *ngIf="send$ | async"></span>
          </div>
         </td>
      </ng-container>
      <!-- Thumbnail Column -->
      <ng-container matColumnDef="thumb">
      <th mat-header *matHeaderCellDef> Thumbnail </th>
      <td mat-cell *matCellDef="let element"> ... </td>
      </ng-container>

      <!-- Hint Column -->
      <ng-container matColumnDef="hint">
        <th mat-header-cell *matHeaderCellDef> Hint </th>
        <td mat-cell *matCellDef="let element"> {{element.hint}} </td>
      </ng-container>
           <!-- Hint Column -->
      <ng-container matColumnDef="del">
        <th mat-header-cell *matHeaderCellDef> Entfernen </th>
        <td mat-cell *matCellDef="let element">
          <button mat-stroked-button color="warn" (click)="deleteVariation(element.sku)">X</button>
        </td>
      </ng-container>

      <!-- Table Rows -->
      <tr mat-header-row *matHeaderRowDef="columns"></tr>
      <tr mat-row *matRowDef="let row; columns: columns;"></tr>
    </table>
  </div>
</div>
<span *ngIf="send$ | async"></span>
<ng-template #noproduct>
  <div class="nodata">
    Product Data nicht gefunden!
  </div>
</ng-template>
<ng-template #select>
  <div class="select">
    Es gibt kein Variationen!
  </div>
</ng-template>
