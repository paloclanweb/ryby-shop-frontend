<div *ngIf="err.message().length > 2">
  <app-error></app-error>
</div>
<div class="pass">
  <h1 matDialogTitle>Passwort ändern</h1>

    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <input matInput type="password" formControlName="oldPassword" placeholder="Altes Passwort" autocomplete="off">
        <mat-error *ngIf="changePasswordForm.get('oldPassword')?.hasError('required')">Altes Passwort ist erforderlich</mat-error>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="password" formControlName="newPassword" placeholder="Neues Passwort" autocomplete="off" >
        <mat-error *ngIf="changePasswordForm.get('newPassword')?.hasError('pattern')">Das Passwort muss mindestens 8 Zeichen lang sein und mindestens einen Buchstaben, eine Zahl und ein &#64;$!%*#?& enthalten.</mat-error>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="password" formControlName="confirmPassword" placeholder="Passwort bestätigen" autocomplete="off" mismatch>
        <mat-error *ngIf="changePasswordForm.get('confirmPassword')?.hasError('required')">Passwort bestätigen ist erforderlich</mat-error>
        <mat-error *ngIf="changePasswordForm.hasError('mismatch')">Die Passwörter stimmen nicht überein</mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit" [disabled]="!changePasswordForm.valid">Passwort ändern</button>
      <span *ngIf="active$ | async"></span>
      <button mat-button matDialogClose>Schlissen</button>
    </form>


  </div>
